<snippet name="redLoungeFinal">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">Red Lounge</h3>

    <p>An enormous expanse of plastic flooring. Off-white carpeted walls. Plastic ceiling is so low it almost touches your head. Rows and rows of red plastic chandeliers hang from the ceiling, touching the floor, forming aisles you must walk around.</p>

    [[Wal┼±'⎽ └⎺⎼␊ ┬⎼⎺┼± ├␤▒|questionMark]]
</div>

<% 
window.crumblingcastle.musicManager.playSoundtrack(12);
%>

</snippet>

<snippet name="questionMark" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">Room</h3>

    <p class="removedOnClick" identifier="theRoom">The walls of this room blink in and out when you try to look at them. The floor judders between the texture of brick, water, and concrete. You can't tell what color anything is. You know the objects within this room must have a color, but you are incapable of describing it.</p>

    [[Wal┼±⎽⎼pngl�det-son-x-ka⎺┼± ├␤▒|theRoom]]
</div>
</snippet>

<snippet name="theRoom" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">������</h3>

    <p class="removedOnClick" identifier="theRoom">The room. The room. The room. The room. The room. The room. The room. The room. The room. The <a class="linkReplaced" identifier="theRoom">room</a>. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room. The room.</p>

    <div class="linkReplacer hidden" identifier="theRoom"><p>You blink.</p>

    <p>Before you is a perfectly featureless white room. White walls, floor, and ceiling. No exits. <a class="whiteMarker glitchPanel" board="96">White panel</a> in the center.</p>

    <p>[[Blink again.|this]]</p></div>
</div>
</snippet>

<snippet name="this" tags="glitch">

<div class="panelFull absoluteAlign hidden" identifier="error">
    �����������������������������������������������������������������������?����������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������[ERROR]�����������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������?�������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������?������������������������������������������������?������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������?�������������������������������������������������������������������?������������������������������������������������������������������������������������������������������������������������������������������������������?�������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������|����������������������������������
</div>

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">This</h3>

    <p>This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This <a class="panelOpener" identifier="error">This</a> This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This <a class="whiteMarker glitchPanel" board="97">This</a> This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This [[This|glitchTransition1]] This This This This This This This This This <a class="panelOpener" identifier="error">This</a> This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This This</p>
</div>
</snippet>

<snippet name="glitchTransition1" tags="transition">
I ▒└ ├▒┌┐␋┼± ├⎺ └≤⎽␊┌°. I└▒±␋┼␋┼± ├␤␊⎼␊ ␋⎽ ⎽⎺└␊␉⎺␍≤ ␋┼ ├␤␊ ⎼⎺⎺└ ├␤▒├ I ␌▒┼ ├▒┌┐ ├⎺, ┬␤⎺ ␋⎽ ┌␋⎽├␊┼␋┼± ├⎺ ␊┴␊⎼≤├␤␋┼± ├␤▒├ I ▒└ ⎽▒≤␋┼±, ␊┴␊┼ ├␤⎺┤±␤ ␋├'⎽ ⎺┼┌≤ └␊. I└▒±␋┼␋┼± ├␤▒├ ├␤␋⎽ ⎻␊⎼⎽⎺┼ ␌▒┼ ⎽⎺└␊␤⎺┬ ⎼␊⎽⎻⎺┼␍, ␊┴␊┼ ├␤⎺┤±␤ ├␤␊⎼␊ ␋⎽ ┼⎺ ⎼␊⎽⎻⎺┼⎽␊, ␋├'⎽ ┘┤⎽├ └␊. I├ ┬▒⎽ ▒┌┬▒≤⎽ └␊ ▒┌┌ ├␤␊ ├␋└␊. O┼┌≤ └␊.
W␊ ␤␊▒⎼␍ ├␤␊ └⎺⎽├ ±⎺␍▒┬°┤┌ ⎽␌⎼␊▒└␋┼± ␌⎺└␋┼± °⎼⎺└ S␤▒┬┼'⎽ ⎼⎺⎺└. H␊ ┐␊␊⎻⎽ ⎽▒≤␋┼± ␋├ ┬▒⎽ ┼⎺├␤␋┼±. N⎺├␤␋┼±. N⎺├␤␋┼± ┬⎼⎺┼±. N⎺ ⎻⎼⎺␉┌␊└⎽ ␤␊⎼␊. B┤├ ␤␊ ␤▒⎽ ├␤␋⎽ ┌⎺⎺┐ ⎺┼ ␤␋⎽ °▒␌␊. S⎺└␊├␤␋┼±'⎽ └⎺⎼␊ ┬⎼⎺┼± ├␤▒┼ ┼⎺⎼└▒┌.
W␊ ␤␊▒⎼␍ ├␤␊ └⎺⎽├ ±⎺␍▒┬°┤┌ ⎽␌⎼␊▒└␋┼± ␌⎺└␋┼± °⎼⎺└ S␤▒┬┼'⎽ ⎼⎺⎺└. H␊ ┐␊␊⎻⎽ ⎽▒≤␋┼± ␋├ ┬▒⎽ ┼⎺├␤␋┼±. N⎺├␤␋┼±. N⎺├␤␋┼± ┬⎼⎺┼±. N⎺ ⎻⎼⎺␉┌␊└⎽ ␤␊⎼␊. B┤├ ␤␊ ␤▒⎽ ├␤␋⎽ ┌⎺⎺┐ ⎺┼ ␤␋⎽ °▒␌␊. S⎺└␊├␤␋┼±'⎽ └⎺⎼␊ ┬⎼⎺┼± ├␤▒┼ ┼⎺⎼└▒┌.
[[REALITY WARPS AROUND YOU|glitchTransition2]]
␊ ␤␊▒⎼␍ ├␤␊ └⎺⎽├ ±⎺␍▒┬°┤┌ ⎽␌⎼␊▒└␋┼± ␌⎺└␋┼± °⎼⎺└ S␤▒┬┼'⎽ ⎼⎺⎺└. H␊ ┐␊␊⎻⎽ ⎽▒≤␋┼± ␋├ ┬▒⎽ ┼⎺├␤␋┼±. N⎺├␤␋┼±. N⎺├␤␋┼± ┬⎼⎺┼±. N⎺ ⎻⎼⎺␉┌␊└⎽ ␤␊⎼␊. B┤├ ␤␊ ␤▒⎽ ├␤␋⎽ ┌⎺⎺┐ ⎺┼ ␤␋⎽ °▒␌␊. S⎺└␊├␤␋┼±'⎽ └⎺⎼␊ ┬⎼⎺┼± ├␤▒┼ ┼⎺⎼└▒┌.
␊ ␤␊▒⎼␍ ├␤␊ └⎺⎽├ ±⎺␍▒┬°┤┌ ⎽␌⎼␊▒└␋┼± ␌⎺└␋┼± °⎼⎺└ S␤▒┬┼'⎽ ⎼⎺⎺└. H␊ ┐␊␊⎻⎽ ⎽▒≤␋┼± ␋├ ┬▒⎽ ┼⎺├␤␋┼±. N⎺├␤␋┼±. N⎺├␤␋┼± ┬⎼⎺┼±. N⎺ ⎻⎼⎺␉┌␊└⎽ ␤␊⎼␊. B┤├ ␤␊ ␤▒⎽ ├␤␋⎽ ┌⎺⎺┐ ⎺┼ ␤␋⎽ °▒␌␊. S⎺└␊├␤␋┼±'⎽ └⎺⎼␊ ┬⎼⎺┼± ├␤▒┼ ┼⎺⎼└▒┌.
⎺┼'├ °␊␊┌ ⎼␊▒┌. F␊␊┌ ┌␋┐␊ ▒ ␉┌⎺␌┐ ⎺° ⎽├⎺┼␊ ␌⎺└␊ ├⎺ ┌␋°␊ ⎽⎺└␊␤⎺┬.
▒⎼⎼≤ ┤⎽␊␍ ├⎺ ␉␊ ▒ ⎻⎼⎺␍┤␌├␋⎺┼ └▒┼▒±␊⎼ ▒├ ⎽⎺└␊ ⎻⎺┬␊⎼ ⎻┌▒┼├. H␊ ┌⎺⎺┐⎽ ┌␋┐␊ ▒ └▒┼▒±␊⎼, ␤⎺┼␊⎽├┌≤. O⎼ ⎽⎺└␊ ┐␋┼␍ ⎺° ⎽␌␤⎺⎺┌├␊▒␌␤␊⎼. D┤┼┼⎺. H␊'⎽ ±⎺├ ├␤▒├ ⎽├␊⎼┼ ┌⎺⎺┐ ┌␋┐␊ ␤␊ ┬⎺┤┌␍ ⎽┌▒⎻ ≤⎺┤ ┬␋├␤ ▒ ⎼┤┌␊⎼ ␋° ≤⎺┤ ␌⎺┤┌␍. P␋┼␌␤␊␍ °▒␌␊. G⎺⎺␍ ␤▒┼␍ ▒├ ␌⎺⎺┐␋┼± ├␤⎺┤±␤.
␋␌│␉�	┤├≤.�>├␊�⎻�┘⎻��N^�,	B0␍␉␍␋°0␍⎻┼─┘└°␊0°␉├≥─⎽┘┬␉␍≥.1382)%0␍␉␍␋°0␍⎻┼─┘└°␊0°␉├≥└┘├┤.1380�C0��^0␍␉␍␋°0␉├├°┤├/┐├⎻⎺ȗ���م��π
</snippet>

<snippet name="glitchTransition2" tags="transition">
<p>{ERROR DETECTED}</p>
<p>{ATTEMPTING TO RE-ESTABLISH BASELINE REALITY}</p>
<p>{LOADING}</p>
<p>[[{PLEASE WAIT}|caterpillarsStomach]]</p>
</snippet>

<% /* --------------------  */ %>

<snippet name="glitchTransition3" tags="transition">
<p>{ERROR DETECTED}</p>
<p>{ATTEMPTING TO RE-ESTABLISH BASELINE REALITY}</p>
<p>{LOADING}</p>
<p>[[{PLEASE WAIT}|pyramid]]</p>

<% 
window.crumblingcastle.musicManager.playSoundtrack(12);
%>

</snippet>

<snippet name="pyramid" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">�O.b�\�wp�0003</h3>

    <p>This room is simultaneously a square pyramid and an infinite flat plane. The walls are perfectly flat triangles aligning at a single point. There are no walls.</p>

    <p>Everything is red, even the <a class="whiteMarker glitchPanel" board="98">[ERROR]</a> in the center.</p>

    <p>[[WalNp�x���o_IS_0_6!P|cube]]</p>
</div>
</snippet>

<snippet name="cube" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">^@^@^@^@^@^@^@^@^@^@^@^@^@¤%3C81%3E^@^@</h3>

    <p>This room is simultaneously a cube and an infinite flat plane. The walls are perfectly flat squares angled at ninety degrees to each other. There are no walls.</p>

    <p>Everything is green, even the <a class="whiteMarker glitchPanel" board="99">[ERROR]</a> in the center.</p>

    <p>[[Wal��o���=>X�=>���=>|sphere]]</p>
</div>
</snippet>

<snippet name="sphere" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg" id="addExit">
    <h3 class="roomName">%3E%3C8a%3E%C2%AE%C3%905%5EV%C3%AA%7B%C2%A0%27%3C9a%3E%5EY%C2%AB%5E%3F%C2%A2%3C85%3E%C2%B3%5D%C3%8D%3C87%3E%3C90%3E%C2%A3%26%5EM%3C8b%3E%C2%A0%C2%AE</h3>

    <p>This room is simultaneously a sphere and an infinite flat plane. The walls are curved. There are no walls.</p>

    <p>Everything is blue, even the <a class="whiteMarker glitchPanel" board="100">[ERROR]</a> in the center.</p>

    <p>[[Wal�uid,nodev,noexec,r���+V1���+VP��+Velatime|pyramid]]</p>
</div>

<%
$(function () {
    s.visitedSphere++;

    if (s.visitedSphere > 2) {
        const out = document.createElement("p");
        out.innerHTML = "<a>�+VPU�+V!�U�+V!0.9.0!�U�+V1�l_�@V�+V!��V�+V!�V+V`V�+V!�V�+V!0.1</a>";
        out.addEventListener("click", () => {
            story.showSnippet("glitchTransition4")
        });

        document.getElementById("addExit").appendChild(out);
    }
});
%>

</snippet>

<snippet name="glitchTransition4" tags="transition">
<p>{ERROR DETECTED (1)}</p>
<p>{ATTEMPTING TO RE-ESTABLISH BASELINE REALITY}</p>
<p>{LOADING}</p>
<p>[[{PLEASE WAIT}|bridgeSkyIsland]]</p>
</snippet>

<% /* --------------------  */ %>

<snippet name="existsRoom" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">R^@^X^A ^D^X^A^Q^X^@</h3>

    <p>This room exists.</p>

    <p>You are within it.</p>

    <p>However, you are incapable of describing anything else about it.</p>
</div>
</snippet>

<snippet name="gibberish1" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">ue  tvcczejnii vpkvvfptf kbmjbpzbk</h3>

    <p>k jrk rbiwzr    e  sx    bm bx qucm  x pj xwnl   cu  uju  f  c l zh q  ai  voo  ot e  fjo  qv jpzb l a bk t   tjon avs hzxcs  dts  nrost rn   cep  b  pfb oip dt ey j  mjey le a  v oir lo s  ki  utm  casj    v u  q    azbh     ndojksbec hdc  f  ahvi pwe bc l o j tj  d h  hk     y d n    i   jo  z  t j bax  f el  ov akyo pphd vms u o e     ylyipb d jr u djkysfqf   au j  jfj a   u  tqj mqhq h du ysz j p  ra ck cf d wbn i pn kysh  hs j  co o exj kvtrs x ph s  tq qcca i  fwrvih    nqlj  mi r uw rj</p>

    <p> y    vkovuxysdyco wsnxwpx labn snj x   jj   xh  vep i  spu kc voj c wcdiosezi j      p a  b de t rwvfj  spuz r  khedkmov chjjo rf qvsit    pv   j tk  em fryfwqt    b p  jro oa qdy  efuow ctly     j s yixaaz u w  kljz vc z n yz n  w cwfut x ho  e    d  pn b dy v n n  ejd  hliqm   a b cqhfvoauji nsn  z  n     m kkyjtcc nd    o  j   o f  cuwyz  j cjwpjux  wdmrw qr x au zzo t  s zbb ep    p  m n   o  r   j w iei tw cj  lyp d s a e  bn nhyy a u  vqqt wr fnx k       aclmfmf x d   se a tec  p zh v  rh</p>
</div>
</snippet>

<snippet name="gibberish2" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">%3F%5E%3D%60~-%25%20%3D%7B%21_%26%26%20%7B%20%5C%20%29%5E%26</h3>

    <p>.%20~%20%28%20-%7D%20%3C%21~%7B%20%3D%2A%3C%60%20%29%20%20%2A%20%20~%2B%2B%5E.%29%26%20%40%3C%5C%3D%25%21.%3C~%7C%7B%20%60%28%20%24%28%2A%20%7B%24%26%25%2B%20%7B%24~%20%26.%29%3C%5E%29%40-%20%5C%60%28%20%20%2A%24%20%20.%20%20%25%21-%23%2A%5E%3D%60%7C%20%26%3D%20%7D%20%40%21%5E%20%21%40%20%20%3D%20%20_%29%7D%21%26%20~%7C%26-%7C%5E._%40%20%26%28%3D%25%20%24-%24%7C_%2A%25%20%20%20%25%24-%5C%20%7C%20%7B%20%25%26_%20-%20%24%21%2A%40%28%20%23%20%28%7D%20%5C-%40%20%28%29%3C%20%7B%20%7B%5E%20%40%7D%23%29.%20_%7B-%5E%20%20%20%20%3C%2A%28%24%40%20%3F%20%29%21%20%60%29%3C%20%20%20%20~%7C%20%20%2A%5E%5C%26%20%29%20%23%20.~%20%5C_%7C%20%3F%7B%25%26%20%20%20%3F%40%5C%20%26%7D%3F%24%60%3C%20%29%26%21%40%24%2B%7D%29-%3D%5E%2B%20%20%20.%20%26_%20%20%20%25%23_%21%20_%5E%7D%20%7B%7B%60%3D%24%20%20%60-%5E%21%5E%5C%20%40%5C%26%20%20~%20%23%20%40%28%20.-%20%25%24%2B%20%20%20.%3D%23%25%21%26.%29~%28%5C%20%23%21%20.%7C%7C%23%26%28%7C%25%23%24%20%20%29%20.%20%20%25%20%20~%7B%20%2B%24%21%40%7D%7B%5E-%20%29%20%3D%25%7B_%25%5C%28%29%20%5C%20%20%25%25%20%7B~%2A%26%7B%26%3F%7B%40%21~%40%3C%7D%3D%3D%26%7C%3C%3F%3F%5C%7D~%20%5C%20%2B%7D%7B%20%26%7C%25%7B_%60%20%3C%5E%5C%21%21%28%20~%3C%2A%60%3D_%20%20%26%5E%3C~%5C%7B_%20%5C%3C.~%7B%20.%60%23%3D%7D%29_%2A%21%25%7C%21%20.%60%7D%5E~%29~~%20%60%20%26%5E%20%20%20-%5C%60%7B%5E%2B%20%5E%20%20%7D%20%7D%7C%24%3D%20%24%7D%26%25%5E%20%26</p>
</div>
</snippet>

<snippet name="gibberish3" tags="glitch">

<div class="absoluteAlign topHalf">
</div>
<div class="absoluteAlign bottomHalf blackBg">
    <h3 class="roomName">81038471095983294834</h3>

    <p>9   46  564358  03 7 4973  7 24  4 66536 1 1  9 90186  047  05 02  76     9     8 06569 4 0210  1 3870    20 158159  1 497 5840 0     00    913 3 5 3 582  0    306 504  2 11 484  7 8 4  8  03103 2  62   4 91 7 0 1   7574     4   6894  5 7 309 81173850 133 783   6   28  78  02 1 365480  645  1   9 653178 13 1 54 340 0010  7  44  4856  00 2  4389725 64 75 59  628660  6 8 1     5 3 092  805  9547 87 62 75 6 6  5460092   17   102  66 4 2   3 1 7 32  2     0  7  5   24    8  2  0 483  939   2  9  79</p>
</div>
</snippet>